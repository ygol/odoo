<?xml version="1.0" encoding="utf-8"?>
<odoo>
<template id="pos_assets_backend" name="POS UI Backend Assets" inherit_id="web.assets_backend" primary="True">
    <xpath expr="//script[contains(@src, '/mail/static/src/js/services/mail_service.js')]" position="replace"></xpath>
</template>

<template id="point_of_sale.js_tests_assets">
    <t t-call-assets="point_of_sale.pos_assets_backend" t-js="false"/>
    <t t-call-assets="web.assets_common" t-css="false"/>
    <t t-call-assets="point_of_sale.pos_assets_backend" t-css="false"/>
    <t t-call-assets="point_of_sale.assets"/>

    <link type="text/css" rel="stylesheet" href="/web/static/lib/qunit/qunit-2.9.1.css"/>
    <script type="text/javascript" src="/web/static/lib/qunit/qunit-2.9.1.js"></script>
    <script type="text/javascript" src="/web/static/tests/helpers/qunit_config.js"></script>
    <script type="text/javascript" src="/web/static/tests/helpers/qunit_asserts.js"></script>

    <script type="text/javascript">
        odoo.define('web.WebClientWithoutServices', function (require) {
            var ServiceProviderMixin = require('web.ServiceProviderMixin');
            var WebClient = require('web.WebClient');
            var WebClientWithoutServices = WebClient.extend({
                /**
                    * Patch web client so that it is no longer a service provider.
                    *
                    * @override
                    */
                init: function () {
                    var originalServiceProviderMixinInit = ServiceProviderMixin.init;
                    ServiceProviderMixin.init = function () {};
                    this._super.apply(this, arguments);
                    ServiceProviderMixin.init = originalServiceProviderMixinInit;
                },
            });
            return WebClientWithoutServices;
        });
        // define the 'web.web_client' module because some other modules require it
        odoo.define('web.web_client', function (require) {
            var WebClient = require('web.WebClientWithoutServices');
            var web_client = new WebClient();
            return web_client;
        });
    </script>

    <style>
        body {
            position: relative; // bootstrap-datepicker needs this
        }
        body:not(.debug) .modal-backdrop, body:not(.debug) .modal, body:not(.debug) .ui-autocomplete {
            opacity: 0 !important;
        }
        #qunit-testrunner-toolbar label {
            font-weight: inherit;
            margin-bottom: inherit;
        }
        #qunit-testrunner-toolbar input[type=text] {
            width: inherit;
            display: inherit;
        }
    </style>

    <script type="text/javascript" src="/web/static/tests/helpers/test_utils_create.js"></script>
    <script type="text/javascript" src="/web/static/tests/helpers/test_utils_dom.js"></script>
    <script type="text/javascript" src="/web/static/tests/helpers/test_utils_fields.js"></script>
    <script type="text/javascript" src="/web/static/tests/helpers/test_utils_file.js"></script>
    <script type="text/javascript" src="/web/static/tests/helpers/test_utils_form.js"></script>
    <script type="text/javascript" src="/web/static/tests/helpers/test_utils_graph.js"></script>
    <script type="text/javascript" src="/web/static/tests/helpers/test_utils_kanban.js"></script>
    <script type="text/javascript" src="/web/static/tests/helpers/test_utils_mock.js"></script>
    <script type="text/javascript" src="/web/static/tests/helpers/test_utils_modal.js"></script>
    <script type="text/javascript" src="/web/static/tests/helpers/test_utils_pivot.js"></script>
    <script type="text/javascript" src="/web/static/tests/helpers/test_utils.js"></script>
    <script type="text/javascript" src="/web/static/tests/helpers/mock_server.js"></script>

    <script type="text/javascript" src="/web/static/tests/boot_tests.js"></script>
</template>

<template id="point_of_sale.qunit_suite">
    <t t-call="web.layout">
        <t t-set="html_data" t-value="{'style': 'height: 100%;'}"/>
        <t t-set="title">Point of Sale Tests</t>
        <t t-set="head">
            <t t-call="point_of_sale.js_tests_assets"/>
            <script type="text/javascript" src="/point_of_sale/static/tests/pos_tests.js"/>
        </t>

        <div id="qunit"/>
        <div id="qunit-fixture"/>
    </t>
</template>

<template id="point_of_sale.qunit_mobile_suite">
    <t t-call="web.layout">
        <t t-set="html_data" t-value="{'style': 'height: 100%;'}"/>
        <t t-set="title">Point of Sale Mobile Tests</t>
        <t t-set="head">
            <script>
                // force the config.device.isMobile key to be true so that
                // mobile specific files aren't rejected
                window.odoo = {};
                var odooDefine;
                Object.defineProperty(window.odoo, 'define', {
                    get: function () {
                        return odooDefine;
                    },
                    set: function (define) {
                        odooDefine = function () {
                            define.apply(this, arguments);
                            if (arguments[0] === 'web.config') {
                                define.call(this, 'web.config.patch', function (require) {
                                    var config = require('web.config');
                                    config.device.isMobile = true;
                                    config.device.size_class = config.device.SIZES.XS;
                                });
                            }
                        };
                    },
                });
            </script>

            <t t-call="point_of_sale.js_tests_assets"/>
        </t>

        <div id="qunit"/>
        <div id="qunit-fixture"/>
    </t>
</template>

<template id="index" name="POS Index">&lt;!DOCTYPE html&gt;
<html>
    <head>
        <title>Odoo POS</title>

        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
        <meta http-equiv="content-type" content="text/html, charset=utf-8" />

        <meta name="viewport" content=" width=1024, user-scalable=no"/>
        <meta name="apple-mobile-web-app-capable" content="yes"/>
        <meta name="mobile-web-app-capable" content="yes"/>

        <link rel="shortcut icon"    sizes="196x196" href="/point_of_sale/static/src/img/touch-icon-196.png"/>
        <link rel="shortcut icon"    sizes="128x128" href="/point_of_sale/static/src/img/touch-icon-128.png"/>
        <link rel="apple-touch-icon"                 href="/point_of_sale/static/src/img/touch-icon-iphone.png"/>
        <link rel="apple-touch-icon" sizes="76x76"   href="/point_of_sale/static/src/img/touch-icon-ipad.png"/>
        <link rel="apple-touch-icon" sizes="120x120" href="/point_of_sale/static/src/img/touch-icon-iphone-retina.png"/>
        <link rel="apple-touch-icon" sizes="152x152" href="/point_of_sale/static/src/img/touch-icon-ipad-retina.png"/>

        <style> body { background: #222; } </style>

        <link rel="shortcut icon" href="/web/static/src/img/favicon.ico" type="image/x-icon"/>

        <script type="text/javascript">
            var odoo = <t t-raw="json.dumps({
                'csrf_token': request.csrf_token(None),
                'session_info': session_info,
                'debug': debug,
            })"/>;
        </script>

        <t t-call-assets="web.assets_common" t-css="false"/>
        <t t-call-assets="point_of_sale.pos_assets_backend" t-css="false"/>
        <t t-call-assets="point_of_sale.assets"/>
        <t t-call="web.conditional_assets_tests"/>

        <script type="text/javascript" id="loading-script" t-raw="init">
            odoo.define('web.web_client', function (require) {
                var WebClient = require('web.AbstractWebClient');
                var web_client = new WebClient();

                web_client._title_changed = function() {};
                web_client.show_application = function() {
                    return web_client.action_manager.do_action("pos.ui");
                };

                $(function () {
                    web_client.setElement($(document.body));
                    web_client.start();
                });
                return web_client;
            });
        </script>
    </head>
    <body>
    </body>
</html>
</template>

<template id="assets_owl" name="point_of_sale assets OWL">
    <link rel="stylesheet" type="text/scss" href="/web/static/src/scss/fonts.scss"/>
    <link rel="stylesheet" href="/web/static/lib/fontawesome/css/font-awesome.css"/>
    <link rel="stylesheet" href="/point_of_sale/static/src/css/pos.css" id="pos-stylesheet"/>
    <link rel="stylesheet" href="/point_of_sale/static/src/css/keyboard.css"/>

    <link rel="stylesheet" type="text/less" href="/web/static/src/scss/fontawesome_overriden.scss"/>

    <script type="text/javascript" src="/web/static/src/js/services/session.js"/>
    <script type="text/javascript" src="/web/static/src/js/fields/field_utils.js"/>
    <script type="text/javascript" src="/barcodes/static/src/js/barcode_parser.js"/>

    <script type="text/javascript" src="/point_of_sale/static/lib/backbone/backbone.js"/>
    <script type="text/javascript" src="/point_of_sale/static/lib/waitfont.js"/>
    <script type="text/javascript" src="/point_of_sale/static/lib/owl.js"/>
    <script type="text/javascript" src="/point_of_sale/static/src/js/db.js"/>
    <script type="text/javascript" src="/point_of_sale/static/src/js/devices.js"/>
    <script type="text/javascript" src="/point_of_sale/static/src/js/models.js"/>

    <script type="text/javascript" src="/point_of_sale/static/src2/js/components/chrome.js"/>
    <script type="text/javascript" src="/point_of_sale/static/src2/js/components/username_widget.js"/>
    <script type="text/javascript" src="/point_of_sale/static/src2/js/components/product_screen_widget.js"/>
    <script type="text/javascript" src="/point_of_sale/static/src2/js/components/product.js"/>
    <script type="text/javascript" src="/point_of_sale/static/src2/js/components/product_list_widget.js"/>
    <script type="text/javascript" src="/point_of_sale/static/src2/js/components/product_categories_widget.js"/>
    <script type="text/javascript" src="/point_of_sale/static/src2/js/components/orderline.js"/>
    <script type="text/javascript" src="/point_of_sale/static/src2/js/components/order_widget.js"/>
    <script type="text/javascript" src="/point_of_sale/static/src2/js/components/actionpad_widget.js"/>
    <script type="text/javascript" src="/point_of_sale/static/src2/js/components/numpad_widget.js"/>
    <script type="text/javascript" src="/point_of_sale/static/src2/js/components/order_selector_widget.js"/>
    <script type="text/javascript" src="/point_of_sale/static/src2/js/backbone_store.js"/>
    <script type="text/javascript" src="/point_of_sale/static/src2/js/formatters.js"/>
    <script type="text/javascript" src="/point_of_sale/static/src2/js/init.js"/>
</template>

<template id="index_owl" name="POS Index OWL">&lt;!DOCTYPE html&gt;
<html>
    <head>
        <meta charset="utf-8"/>
        <title>Odoo POS</title>

        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
        <meta name="viewport" content=" width=1024, user-scalable=no"/>
        <meta name="apple-mobile-web-app-capable" content="yes"/>
        <meta name="mobile-web-app-capable" content="yes"/>

        <link rel="shortcut icon"    sizes="196x196" href="/point_of_sale/static/src/img/touch-icon-196.png"/>
        <link rel="shortcut icon"    sizes="128x128" href="/point_of_sale/static/src/img/touch-icon-128.png"/>
        <link rel="apple-touch-icon"                 href="/point_of_sale/static/src/img/touch-icon-iphone.png"/>
        <link rel="apple-touch-icon" sizes="76x76"   href="/point_of_sale/static/src/img/touch-icon-ipad.png"/>
        <link rel="apple-touch-icon" sizes="120x120" href="/point_of_sale/static/src/img/touch-icon-iphone-retina.png"/>
        <link rel="apple-touch-icon" sizes="152x152" href="/point_of_sale/static/src/img/touch-icon-ipad-retina.png"/>

        <style> body { background: #222; } </style>

        <link rel="shortcut icon" href="/web/static/src/img/favicon.ico" type="image/x-icon"/>

        <script type="text/javascript">
            var odoo = {
                csrf_token: "<t t-esc="request.csrf_token(None)"/>",
                session_info: <t t-raw="session_info"/>,
                debug: "<t t-esc="debug"/>",
            };
        </script>

        <t t-call-assets="web.assets_common" t-css="false"/>
        <t t-call-assets="point_of_sale.assets_owl"/>
        <t t-call="web.conditional_assets_tests"/>
    </head>
    <body/>
</html>
</template>

<!-- This is a duplicate of Qweb template JS side CustomerFacingDisplayHead. We could have told models.js to do an extra rpc call for this-->
<template id="extra_head">
    <link href="/point_of_sale/static/src/css/customer_facing_display.css" rel="stylesheet"/>
    <script type="text/javascript">
        $(document).ready(function(){
            $(window).on('resize', function () {
                $('.pos-customer_facing_display').toggleClass('pos-js_no_ADV', $('.pos-adv').hasClass('pos-hidden'));
            }).trigger('resize');
        });
    </script>
</template>

<template id="pos_editor_assets" inherit_id="web_editor.wysiwyg_snippets">
    <xpath expr="//script[last()]" position="after">
        <script type="text/javascript" src="/point_of_sale/static/src/js/pos.web_editor.js"/>
    </xpath>
</template>


<template id="customer_facing_display_snippets">
    <!-- web_editor needs a ul (normally contains the header, body, extra buttons)-->
    <ul/>
    <div id="o_scroll" class="d-none"/>

    <div id="snippet_options" class="d-none">
        <t t-call="web_editor.snippet_options"/>

        <div data-js='pos_no_remove' data-selector=".pos-company_logo, .pos-adv, .pos-customer_facing_display"/>
        <div data-js='pos_no_parent' data-selector=".pos-company_logo, .pos-adv"/>
        <div data-js='pos_company_logo' data-selector=".pos-company_logo"/>

        <div data-js='pos_palette' data-selector=".pos-customer_facing_display">
            <a href="#" class="pos-palette_01 dropdown-item" data-select-class="pos-palette_01"></a>
            <a href="#" class="pos-palette_02 dropdown-item" data-select-class="pos-palette_02"></a>
            <a href="#" class="pos-palette_03 dropdown-item" data-select-class="pos-palette_03"></a>
            <a href="#" class="pos-palette_04 dropdown-item" data-select-class="pos-palette_04"></a>
            <a href="#" class="pos-palette_05 dropdown-item" data-select-class="pos-palette_05"></a>
            <a href="#" class="pos-palette_06 dropdown-item" data-select-class="pos-palette_06"></a>
            <a href="#" class="pos-palette_07 dropdown-item" data-select-class="pos-palette_07"></a>
            <a href="#" class="pos-palette_08 dropdown-item" data-select-class="pos-palette_08"></a>
            <a href="#" class="pos-palette_09 dropdown-item" data-select-class="pos-palette_09"></a>
            <a href="#" class="pos-palette_10 dropdown-item" data-select-class="pos-palette_10"></a>
            <a href="#" class="pos-palette_11 dropdown-item" data-select-class="pos-palette_11"></a>
            <a href="#" class="pos-palette_12 dropdown-item" data-select-class="pos-palette_12"></a>
            <a href="#" class="pos-palette_13 dropdown-item" data-select-class="pos-palette_13"></a>
        </div>

        <div data-js='pos_background' data-selector=".pos-company_logo, .pos-adv">
            <a href="#" class="dropdown-item" data-choose-image="true" data-no-preview="true"><b>Set Custom Image...</b></a>
            <a href="#" class="dropdown-item d-none pos-use_default_logo" data-background="">Default company logo</a>
            <div class="dropdown-divider"/>
            <a href="#" class="dropdown-item" data-toggle-class="pos-hidden"><i class="fa fa-eye-slash"/>Hide</a>
        </div>
    </div>
</template>
</odoo>
